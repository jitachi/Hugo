<!doctype html>
<html lang="{{ .Site.LanguageCode | default "en-us" }}">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>
      {{ if .IsHome }}
        ðŸ‘‹ â€¢
      {{ else }}
        {{ if .Page.Title }}{{ .Page.Title }} â€¢{{ end }}
      {{ end }}
      {{ .Site.Title }}
    </title>

    {{ with .Site.Params.description }}
      <meta name="description" content="{{ . }}" />
    {{ end }}
    {{ with .Site.Params.author }}
      <meta name="author" content="{{ . }}" />
    {{ end }}


    <script>
      (function () {
        let theme = localStorage.getItem("theme") || "auto";
        let systemDark = window.matchMedia(
          "(prefers-color-scheme: dark)",
        ).matches;

        if (theme === "dark" || (theme === "auto" && systemDark)) {
          document.documentElement.classList.add("dark");
        } else {
          document.documentElement.classList.add("light");
        }
      })();
    </script>

    <link rel="stylesheet" href="{{ "css/style.css" | relURL }}" />
    {{ $styles := resources.Get "style.css" }}
    <link rel="stylesheet" href="{{ $styles.RelPermalink }}" />

    <link rel="shortcut icon" type="image/png" href="/favicon.svg" />
    <link rel="shortcut icon" sizes="192x192" href="/favicon.svg" />
    <link rel="apple-touch-icon" href="/favicon.svg" />
  </head>
  <body>
    <div class="w-full">
      <!-- Header Spacing: Control padding/margins here -->
      <div class="sticky top-0 z-50 px-[8vw] pt-[4vw] bg-[var(--color-bg)]">
        {{ partial "header.html" . }}
      </div>

      <!-- Main Content Spacing: Control max-width and padding here -->
      <div class="w-full flex justify-center px-[8vw]">
        <div class="w-full max-w-[1400px]">
          {{ block "main" . }}{{ end }}
        </div>
      </div>
    </div>
    <script>
      // Simple page preloading for faster navigation
      document.addEventListener("DOMContentLoaded", function () {
        // Preload pages on hover
        document.addEventListener("mouseover", function (e) {
          if (
            e.target.tagName === "A" &&
            e.target.href &&
            !e.target.href.includes("#")
          ) {
            const link = e.target.href;
            if (!link.includes(window.location.origin)) return;

            // Preload the page
            const prefetchLink = document.createElement("link");
            prefetchLink.rel = "prefetch";
            prefetchLink.href = link;
            document.head.appendChild(prefetchLink);
          }
        });
      });
    </script>
  </body>
</html>
