<!doctype html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>
      
        Rainforest â€¢
      
      Jitachi
    </title>

    
    


    <script>
      (function () {
        let theme = localStorage.getItem("theme") || "auto";
        let systemDark = window.matchMedia(
          "(prefers-color-scheme: dark)",
        ).matches;

        if (theme === "dark" || (theme === "auto" && systemDark)) {
          document.documentElement.classList.add("dark");
        } else {
          document.documentElement.classList.add("light");
        }
      })();
    </script>

    <link rel="stylesheet" href="/css/variables.css" />
    <link rel="stylesheet" href="/css/type.css" />
    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/tailwind.css" />

    <link rel="shortcut icon" type="image/png" href="/favicon.svg" />
    <link rel="shortcut icon" sizes="192x192" href="/favicon.svg" />
    <link rel="apple-touch-icon" href="/favicon.svg" />
  </head>
  <body>
    <div class="sticky top-0 left-0 z-50 px-[4vw] py-[4vw]">
      <header class="flex items-center justify-between">
  <div
    class="glass-container flex items-center gap-2 py-3 px-4 rounded-full relative"
  >
    
    <div class="nav-indicator"></div>

    <a class="logo relative z-10 p-1" href="https://jitachi.com/" data-nav-item>
      <img
        class="w-7 min-w-7 rounded-full border border-white"
        src="https://jitachi.com/img/avatar.png"
      />
      
    </a>

    <div class="flex gap-0 relative z-10">
      
      
        <a
          class="p-2 px-4 text-base font-[600] transition ease-in-out duration-200 rounded-full 
        "
          href="/about/"
          title="About"
          data-nav-item
          >About</a
        >
      
    </div>
  </div>

  
<link
  rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
/>


<button id="theme-toggle">
  
  
  <div id="sun-icon" class="text-lg opacity-40" style="display: none;">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-sun"><circle cx="12" cy="12" r="4"/><path d="M12 2v2"/><path d="M12 20v2"/><path d="m4.93 4.93 1.41 1.41"/><path d="m17.66 17.66 1.41 1.41"/><path d="M2 12h2"/><path d="M20 12h2"/><path d="m6.34 17.66-1.41 1.41"/><path d="m19.07 4.93-1.41 1.41"/></svg>

  </div>
  <div id="moon-icon" class="text-lg opacity-40">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-moon"><path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"/></svg>
  </div>
</button>

<script>
 document.addEventListener("DOMContentLoaded", function () {
  const themeToggleBtn = document.getElementById("theme-toggle");
  const sunIcon = document.getElementById("sun-icon");
  const moonIcon = document.getElementById("moon-icon");
  let currentTheme = localStorage.getItem("theme") || "auto"; 

  const systemDarkQuery = window.matchMedia("(prefers-color-scheme: dark)");

  function applyTheme(theme) {
    if (theme === "dark") {
      document.documentElement.classList.add("dark");
      document.documentElement.classList.remove("light");
      sunIcon.style.display = "inline";
      moonIcon.style.display = "none";
    } else if (theme === "light") {
      document.documentElement.classList.add("light");
      document.documentElement.classList.remove("dark");
      sunIcon.style.display = "none";
      moonIcon.style.display = "inline";
    } else {
      
      if (systemDarkQuery.matches) {
        document.documentElement.classList.add("dark");
        document.documentElement.classList.remove("light");
        sunIcon.style.display = "inline";
        moonIcon.style.display = "none";
      } else {
        document.documentElement.classList.add("light");
        document.documentElement.classList.remove("dark");
        sunIcon.style.display = "none";
        moonIcon.style.display = "inline";
      }
    }
  }

  
  applyTheme(currentTheme);

  
  themeToggleBtn.addEventListener("click", () => {
    let newTheme = localStorage.getItem("theme") || "auto";

    if (newTheme === "light" || newTheme === "auto") {
      localStorage.setItem("theme", "dark");
      applyTheme("dark");
    } else {
      localStorage.setItem("theme", "light");
      applyTheme("light");
    }
  });

  
  systemDarkQuery.addEventListener("change", () => {
    if (localStorage.getItem("theme") === "auto") {
      applyTheme("auto");
    }
  });
});
</script>

</header>

    </div>

    <div id="page-content">
      
  
  <main class="relative w-full flex flex-col justify-center px-[6vw] pt-[6vw]">
    
    <div class="max-w-4xl mx-auto">
      <div class=" mx-auto max-w-[--content-width] relative mb-12">
        <time
          class="text-base font-[600] opacity-30"
          datetime="March 5, 2024"
        >
          March 5, 2024
        </time>

        <p class="text-4xl font-[600] tracking-[-0.0375em] mt-4">
          Rainforest
        </p>
      </div>

      <div
        class="long-form"
        style="margin-left: 0; margin-right: 0; max-width: none;"
      >
        <!-- <p class="large">We choose to go to the moon. We choose to go to the moon in this decade and do the other things, not because they are easy, but because they are hard, because that goal will serve to organize and measure the best of our energies and skills.</p> -->
<img src="images/rainforest.png" alt="image alt test"><h4 id="performance-upgrades">Performance Upgrades</h4>
<p>It is for these reasons that I regard the decision last year to shift our efforts in space from low to high gear as among the most important decisions that will be made during my incumbency in the office of the Presidency.</p>
<ul>
<li>APR Engine (ECU) Tune Stage 1</li>
<li>APR Transmission (TCU) Tune Stage 1</li>
<li>NGK Performance Spark Plugs</li>
<li>Racingline R600 Closed Intake</li>
<li>Racingline Turbo inlet pipe &amp; hoses</li>
<li>APR Turbo muffler delete</li>
<li>Integrated Engineering Performance Intercooler</li>
</ul>

      </div>

      
    </div>
  </main>

    </div>

    <script>
      
      (function () {
        const indicator = document.querySelector(".nav-indicator");
        const navItems = document.querySelectorAll("[data-nav-item]");
        const pageContent = document.querySelector("#page-content");

        
        const pageCache = new Map();
        const domCache = new Map();

        
        const STORAGE_KEY = "nav-indicator-position";

        function savePosition(left, top, width, height) {
          sessionStorage.setItem(
            STORAGE_KEY,
            JSON.stringify({ left, top, width, height }),
          );
        }

        function getSavedPosition() {
          const saved = sessionStorage.getItem(STORAGE_KEY);
          return saved ? JSON.parse(saved) : null;
        }

        function moveIndicatorTo(targetItem, immediate = false) {
          if (!targetItem || !indicator) return;

          const rect = targetItem.getBoundingClientRect();
          const container = targetItem.closest(".glass-container");
          const containerRect = container.getBoundingClientRect();

          const left = rect.left - containerRect.left;
          const top = rect.top - containerRect.top;

          savePosition(left, top, rect.width, rect.height);

          if (immediate) {
            indicator.style.transition = "none";
            indicator.style.width = rect.width + "px";
            indicator.style.height = rect.height + "px";
            indicator.style.left = left + "px";
            indicator.style.top = top + "px";
            indicator.style.opacity = "1";
            indicator.offsetHeight;
            indicator.style.transition = "";
          } else {
            indicator.style.width = rect.width + "px";
            indicator.style.height = rect.height + "px";
            indicator.style.left = left + "px";
            indicator.style.top = top + "px";
            indicator.style.opacity = "1";
          }
        }

        function initializeIndicator() {
          let activeItem = document.querySelector(".active");

          if (!activeItem) {
            const isHome =
              window.location.pathname === "/" ||
              window.location.pathname === "";
            if (isHome) {
              activeItem = document.querySelector(".logo");
            }
          }

          if (activeItem) {
            const savedPosition = getSavedPosition();

            if (savedPosition) {
              indicator.style.transition = "none";
              indicator.style.width = savedPosition.width + "px";
              indicator.style.height = savedPosition.height + "px";
              indicator.style.left = savedPosition.left + "px";
              indicator.style.top = savedPosition.top + "px";
              indicator.style.opacity = "1";
              indicator.offsetHeight;
              indicator.style.transition = "";
            } else {
              moveIndicatorTo(activeItem, true);
            }
          }
        }

        
        async function fetchPage(url) {
          if (pageCache.has(url)) {
            console.log("Using cached page:", url);
            return pageCache.get(url);
          }

          try {
            console.log("Fetching page:", url);
            const response = await fetch(url);
            const html = await response.text();
            const parser = new DOMParser();
            const doc = parser.parseFromString(html, "text/html");

            const newContent = doc.querySelector("#page-content");
            const title = doc.querySelector("title")?.textContent || "";

            console.log("Fetched content:", newContent ? "found" : "not found");

            const pageData = {
              content: newContent ? newContent.innerHTML : "",
              title: title,
            };

            pageCache.set(url, pageData);
            return pageData;
          } catch (error) {
            console.error("Failed to fetch page:", error);
            return null;
          }
        }

        
        function rebaseRelativeUrls(container, baseHref) {
          if (!container || !baseHref) return;

          let baseUrl;
          try {
            baseUrl = new URL(baseHref, window.location.origin);
          } catch (error) {
            console.warn("Invalid base URL for rebasing:", baseHref);
            return;
          }

          const needsRewrite = (value) =>
            value &&
            !value.startsWith("http://") &&
            !value.startsWith("https://") &&
            !value.startsWith("//") &&
            !value.startsWith("/") &&
            !value.startsWith("data:") &&
            !value.startsWith("blob:") &&
            !value.startsWith("#");

          container.querySelectorAll("[src]").forEach((el) => {
            const src = el.getAttribute("src");
            if (needsRewrite(src)) {
              el.src = new URL(src, baseUrl).href;
            }
          });

          container.querySelectorAll("[href]").forEach((el) => {
            const href = el.getAttribute("href");
            if (needsRewrite(href)) {
              el.href = new URL(href, baseUrl).href;
            }
          });
        }

        
        function getSlideDirection(fromItem, toItem) {
          if (!fromItem || !toItem) return "left";

          const fromRect = fromItem.getBoundingClientRect();
          const toRect = toItem.getBoundingClientRect();

          
          return toRect.left > fromRect.left ? "left" : "right";
        }

        
        async function navigateToPage(url, link) {
          if (!pageContent) {
            console.error("Page content container not found");
            return;
          }

          console.log("Navigating to:", url);

          
          const currentUrl = window.location.pathname;
          if (!domCache.has(currentUrl)) {
            const currentContent = pageContent.cloneNode(true);
            domCache.set(currentUrl, currentContent);
            console.log("Cached current page:", currentUrl);
          }

          
          const currentActive =
            document.querySelector(".active") ||
            (window.location.pathname === "/" || window.location.pathname === ""
              ? document.querySelector(".logo")
              : null);

          const direction = getSlideDirection(currentActive, link);
          console.log("Slide direction:", direction);

          
          const pageData = await fetchPage(url);
          if (!pageData || !pageData.content) {
            console.log("No page data, falling back to regular navigation");
            
            window.location.href = url;
            return;
          }

          
          pageContent.style.transition =
            "transform 0.125s ease-out, opacity 0.125s ease";
          pageContent.style.transform =
            direction === "left" ? "translateX(-24px)" : "translateX(24px)";
          pageContent.style.opacity = "0";

          
          setTimeout(() => {
            
            const cachedDom = domCache.get(url);
            if (cachedDom) {
              console.log("Using cached DOM for:", url);
              
              pageContent.innerHTML = "";
              const newContent = cachedDom.cloneNode(true);
              Array.from(newContent.childNodes).forEach((node) => {
                pageContent.appendChild(node);
              });
            } else {
              
              pageContent.innerHTML = pageData.content;
            }

            
            rebaseRelativeUrls(pageContent, url);

            document.title = pageData.title;

            console.log("Content updated");

            
            document.querySelectorAll("[data-nav-item]").forEach((item) => {
              item.classList.remove("active");
            });
            link.classList.add("active");

            
            pageContent.style.transition = "none";
            pageContent.style.transform =
              direction === "left" ? "translateX(24px)" : "translateX(-24px)";
            pageContent.style.opacity = "0";

            
            pageContent.offsetHeight;

            
            pageContent.style.transition =
              "transform 0.125s ease-out, opacity 0.125s ease";
            pageContent.style.transform = "translateX(0)";
            pageContent.style.opacity = "1";

            
            history.pushState({ url: url }, "", url);

            
            window.scrollTo(0, 0);
          }, 125);
        }

        
        window.addEventListener("popstate", function (e) {
          if (e.state && e.state.url) {
            const link = document.querySelector(`[href="${e.state.url}"]`);
            if (link) {
              navigateToPage(e.state.url, link);
              moveIndicatorTo(link, false);
            } else {
              window.location.href = e.state.url;
            }
          }
        });

        
        if (document.readyState === "loading") {
          document.addEventListener("DOMContentLoaded", initializeIndicator);
        } else {
          initializeIndicator();
        }

        
        window.addEventListener("resize", function () {
          const activeItem =
            document.querySelector(".active") ||
            (window.location.pathname === "/" || window.location.pathname === ""
              ? document.querySelector(".logo")
              : null);
          if (activeItem) {
            moveIndicatorTo(activeItem, false);
          }
        });

        
        document.addEventListener("mouseover", function (e) {
          const link = e.target.closest("[data-nav-item]");
          if (link && link.href) {
            fetchPage(link.href);
          }
        });

        
        document.addEventListener("click", function (e) {
          const link = e.target.closest("[data-nav-item]");
          if (link && !e.ctrlKey && !e.metaKey && !e.shiftKey) {
            e.preventDefault();

            
            if (link.classList.contains("active")) {
              return;
            }

            
            if (link.classList.contains("logo")) {
              const isHome =
                window.location.pathname === "/" ||
                window.location.pathname === "";
              if (isHome) {
                return;
              }
            }

            
            moveIndicatorTo(link, false);

            
            navigateToPage(link.href, link);
          }
        });
      })();
    </script>
  </body>
</html>
